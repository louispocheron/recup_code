(self.webpackChunk=self.webpackChunk||[]).push([[315],{6915:(e,t,n)=>{"use strict";n(5666),n(3710),n(9554),n(1539),n(4747),n(6992),n(8783),n(3948),n(1637),n(285),n(9714),n(2564),n(1249),n(1038),n(2222),n(8674);var o=n(130),r=n(5299),a=n(1401);function c(e,t,n,o,r,a,c){try{var l=e[a](c),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(o,r)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var a=e.apply(t,n);function l(e){c(a,o,r,l,u,"next",e)}function u(e){c(a,o,r,l,u,"throw",e)}l(void 0)}))}}var u=document.getElementById("selectYear"),i=document.querySelector(".total-paragraphe"),s=document.querySelector(".modal-adherer"),d=document.querySelector(".total-heure"),p=document.querySelector(".total-payer"),f=document.querySelector(".total-don"),m=document.querySelector(".total-valorisees"),v=document.querySelectorAll(".duree"),y=document.querySelectorAll(".payerTd"),h=document.querySelectorAll(".donTd"),g=document.querySelectorAll(".valoriseesTd"),b=document.querySelector(".alert-message"),S=(document.querySelector(".arrowTurn"),document.querySelector(".content-container")),x=function(){delete s.dataset.active,S.style.opacity="1"},T=document.createElement("option");T.text="Tous",T.value="rien",u.add(T);for(var w=(new Date).getFullYear();w>=1965;){var q=document.createElement("option");q.text=w,q.value=w,u.add(q),w-=1}for(var L=document.getElementById("selectMonth"),A=document.querySelector(".table"),M=document.querySelector(".btn-submit"),E=[{value:"",text:"Tous"},{value:"01",text:"Janvier"},{value:"02",text:"Février"},{value:"03",text:"Mars"},{value:"04",text:"Avril"},{value:"05",text:"Mai"},{value:"06",text:"Juin"},{value:"07",text:"Juillet"},{value:"08",text:"Août"},{value:"09",text:"Septembre"},{value:"10",text:"Octobre"},{value:"11",text:"Novembre"},{value:"12",text:"Décembre"}],H=0;H<E.length;H++){var k=document.createElement("option");k.text=E[H].text,k.value=E[H].value,k.className="select-month",L.add(k)}var I=document.querySelectorAll(".data-assoc"),D=document.querySelector(".selectAssoc"),R=document.createElement("option");R.text="Toutes",R.value="rien",D.add(R),I.forEach((function(e){var t=document.createElement("option");t.text=e.dataset.association,t.value=e.dataset.id,D.add(t)}));document.querySelectorAll(".actionDelete"),document.querySelectorAll(".modal-open-delete");var F,O,P,N,j=document.querySelector(".btn-no"),B=document.querySelector(".btn-yes");function C(){ce.style.display="none";var e=u.options[u.selectedIndex],t=L.options[L.selectedIndex],n=D.options[D.selectedIndex],c=new URLSearchParams;c.append("year",e.value),c.append("month",t.value),c.append("association",n.value);var l=new URL(window.location.href);axios.post(l.pathname+"?"+c.toString()+"&ajax=1",{year:e.value,month:t.value,association:n.value}).then((function(e){var n=document.querySelector(".ajaxDivContent"),c=document.querySelector(".ajaxDivContentPdf"),l=e.data.content,s=e.data.contentPdf;if(""==l)[i,d,p,f,m].forEach((function(e){e.textContent=""})),b.style.display="block",b.innerHTML='<p style="color:red; text-align: center;">aucune donnée trouvée pour cette recherche</p>',ce.style.display="none",ae.style.display="none",setTimeout((function(){b.style.display="none"}),3e3);else{ae.style.display="block";var v=u.options[u.selectedIndex].value;n.innerHTML=l,c.innerHTML=s;var y=document.querySelectorAll(".duree"),h=Array.from(y).map((function(e){return e.dataset.duree}));F=(0,o.F)(h),d.innerHTML='Bénévolat : <span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(F,"</span>");var g=document.querySelectorAll(".payerTd"),S=Array.from(g).map((function(e){return e.dataset.payer}));O=(0,a.A)(S),p.innerHTML='Remboursements : <span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(O,"€</span>");var x=document.querySelectorAll(".donTd"),T=Array.from(x).map((function(e){return e.dataset.don}));P=(0,r.l)(T),f.innerHTML='Dons :<span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(P,"€</span>");var w=document.querySelectorAll(".valoriseesTd"),q=Array.from(w).map((function(e){return e.dataset.valorisees}));N=(0,r.l)(q),m.innerHTML='Valorisées : <span style="\n            color:#097969;\n            font-weight: bold;\n            ">'.concat(N,"€</span> "),""==t.value&&void 0!==v&&(i.innerHTML='Total pour l\'année <span style="\n            color:#152149;\n            font-weight: bold;\n            ">'.concat(v,"</span>:")),""==t.value&&"rien"==v&&(console.log("passe par la"),i.innerHTML="Total de toutes vos saisies :"),"rien"!=v&&""!=t.value&&(i.innerHTML='Total pour le <span style="\n            color:#152149;\n            font-weight: bold;\n            ">'.concat(t.value,"/").concat(v,"</span>:")),"rien"==v&&""!=t.value&&(i.innerHTML='Total pour tout les mois de <span style="\n            color:#152149;\n            font-weight: bold;\n            ">'.concat(t.text,"</span>:"))}})).catch((function(e){console.log(e)}))}M.addEventListener("click",C);var U=Array.from(v).map((function(e){return e.dataset.duree})),V=(0,o.F)(U);d.innerHTML='Bénévolat : <span style="\n            color:#097969;\n            font-weight: bold;\n            ">'.concat(V,"</span>");var J=Array.from(y).map((function(e){return e.dataset.payer})),_=(0,a.A)(J);p.innerHTML='Remboursement : <span style="\n            color:#097969;\n            font-weight: bold;\n            ">'.concat(_,"€</span>");var Y=Array.from(h).map((function(e){return e.dataset.don})),W=(0,r.l)(Y);f.innerHTML='Dons :<span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(W,"€</span>");var z=Array.from(g).map((function(e){return e.dataset.valorisees})),G=(0,r.l)(z);m.innerHTML='Valorisées : <span style="\n            color:#097969;\n            font-weight: bold;\n            ">'.concat(G,"€</span>");var K=document.querySelectorAll(".pdfIcone"),Q=document.URL;K.forEach((function(e){e.addEventListener("click",(function(t){t.preventDefault();var n=e.dataset.id,o="".concat(Q,"/pdf/").concat(n);console.log(V),axios.post(o).then((function(e){console.log(e),window.location.href=o})).catch((function(e){console.log(e)}))}))}));var X=document.querySelector(".wrapper-pdf"),Z=document.querySelector(".pdf-benevolat"),$=document.querySelector(".pdf-don"),ee=document.querySelector(".pdf-remboursement"),te=document.querySelector(".pdf-valorisee");function ne(){return(ne=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.style.display="flex",Z.innerHTML='Bénévolat : <span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(F,"</span>"),$.innerHTML='Dons :<span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(P,"€</span>"),ee.innerHTML='Remboursements : <span style="color:#097969;\n            font-weight: bold;\n            "> '.concat(O,"€</span>"),te.innerHTML='Valorisées : <span style="\n            color:#097969;\n            font-weight: bold;\n            ">'.concat(N,"€</span> "),t={filename:"Saved_pdf.pdf",margin:1,image:{type:"jpeg"},html2canvas:{scale:10},jsPDF:{orientation:"landscape"}},html2pdf().from(X).set(t).save();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(){return(oe=l(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:X.style.display="flex",Z.innerHTML='Bénévolat : <span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(V,"</span>"),$.innerHTML='Dons :<span style="\n            color:#097969;\n            font-weight: bold;\n            "> '.concat(W,"€</span>"),ee.innerHTML='Remboursements : <span style="color:#097969;\n            font-weight: bold;\n            "> '.concat(_,"€</span>"),te.innerHTML='Valorisées : <span style="\n            color:#097969;\n            font-weight: bold;\n            ">'.concat(G,"€</span> "),t={filename:"Saved_pdf.pdf",margin:1,image:{type:"jpeg"},html2canvas:{scale:10},jsPDF:{orientation:"landscape"}},html2pdf().from(X).set(t).save();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var re,ae=document.querySelector(".btn-pdf"),ce=document.querySelector(".btn-pdf-all");ae.addEventListener("click",(function(){(function(){return ne.apply(this,arguments)})().then((function(){X.style.display="none"})).catch((function(e){console.log(e)}))})),ce.addEventListener("click",(function(){(function(){return oe.apply(this,arguments)})().then((function(){X.style.display="none"})).catch((function(e){console.log(e)}))})),A.addEventListener("click",(function(e){if(e.target.matches(".pdf_icone")){var t=e.target.dataset.id;window.location.href="/recapitulatif/pdf/".concat(t)}})),A.addEventListener("click",(function(e){e.target.matches(".trash-png")&&(re=e.target.dataset.id,s.dataset.active=!0,S.style.opacity="0.4")})),B.addEventListener("click",(function(e){e.preventDefault();var t=document.URL,n="".concat(t,"/remove/").concat(re);axios.post(n).then((function(e){console.log(e),document.querySelector(".tr-".concat(re)).remove(),x(),Toastify({text:"Saisie bien supprimé",duration:5e3,newWindow:!0,close:!0,gravity:"top",position:"right",stopOnFocus:!0,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"},onClick:function(){}}).showToast(),C()})).catch((function(e){console.log(e)}))})),j.addEventListener("click",(function(){x()}))},5299:(e,t,n)=>{"use strict";n.d(t,{l:()=>o});n(9554),n(1539),n(4747),n(2772),n(1249),n(4916),n(3123),n(1058),n(5827),n(7327),n(2222);function o(e){if(e.length>1){e.forEach((function(t){if(null==t){var n=e.indexOf(t);-1!==n&&(e[n]="0")}}));var t,n=e.map((function(e){return e.split(".")[0]})),o=(n=n.map((function(e){return parseInt(e)}))).reduce((function(e,t){return e+t})),r=e.map((function(e){return e.split(".")[1]}));for(t=(r=(r=r.filter((function(e){return!isNaN(e)}))).map((function(e){return parseInt(e)}))).length>1?r.reduce((function(e,t){return e+t})):0;t>99;)o++,t-=100;var a="".concat(o,".").concat(t);return 0==t&&(a="".concat(o)),a}return 1==e.length&&null!=e[0]?e[0]:"0"}},130:(e,t,n)=>{"use strict";n.d(t,{F:()=>o});n(9554),n(1539),n(4747),n(2772),n(1249),n(4916),n(3123),n(1058),n(5827),n(2222);function o(e){if(e.length>=1){e.forEach((function(t){if(0==t||null==t){var n=e.indexOf(t);-1!=n&&(e[n]="00h00")}}));for(var t=e.map((function(e){return e.split("h")[0]})),n=(t=t.map((function(e){return parseInt(e)}))).reduce((function(e,t){return e+t})),o=e.map((function(e){return e.split("h")[1].split("m")[0]})),r=(o=o.map((function(e){return parseInt(e)}))).reduce((function(e,t){return e+t}));r>59;)n++,r-=60;return r<10&&(r="0".concat(r)),"".concat(n,"h").concat(r)}if(1==e.length)return e[0]}},1401:(e,t,n)=>{"use strict";n.d(t,{A:()=>o});n(9554),n(1539),n(4747),n(2772),n(1249),n(4916),n(3123),n(1058),n(5827),n(7327),n(2222);function o(e){if(e.length>1){e.forEach((function(t){if(""==t||null==t){var n=e.indexOf(t);-1!==n&&(e[n]="0")}}));var t=e.map((function(e){return e.split(".")[0]})),n=0;null!=(t=t.map((function(e){return parseInt(e)})))&&(n=t.reduce((function(e,t){return e+t})));var o=e.map((function(e){return e.split(".")[1]})),r=null;for(o.forEach((function(e){if(null==e){var t=o.indexOf(e);-1!==t&&(o[t]="0")}})),r=(o=(o=o.filter((function(e){return!isNaN(e)}))).map((function(e){return parseInt(e)}))).reduce((function(e,t){return e+t}));r>99;)n++,r-=10;return"".concat(n,".").concat(r)}return e[0]}},1038:(e,t,n)=>{var o=n(2109),r=n(8457);o({target:"Array",stat:!0,forced:!n(7072)((function(e){Array.from(e)}))},{from:r})},3710:(e,t,n)=>{var o=n(1702),r=n(1320),a=Date.prototype,c="Invalid Date",l="toString",u=o(a.toString),i=o(a.getTime);String(new Date(NaN))!=c&&r(a,l,(function(){var e=i(this);return e==e?u(this):c}))},9714:(e,t,n)=>{"use strict";var o=n(1702),r=n(6530).PROPER,a=n(1320),c=n(9670),l=n(7976),u=n(1340),i=n(7293),s=n(7066),d="toString",p=RegExp.prototype,f=p.toString,m=o(s),v=i((function(){return"/a/b"!=f.call({source:"a",flags:"b"})})),y=r&&f.name!=d;(v||y)&&a(RegExp.prototype,d,(function(){var e=c(this),t=u(e.source),n=e.flags;return"/"+t+"/"+u(void 0===n&&l(p,e)&&!("flags"in p)?m(e):n)}),{unsafe:!0})},2564:(e,t,n)=>{var o=n(2109),r=n(7854),a=n(2104),c=n(614),l=n(8113),u=n(206),i=n(8053),s=/MSIE .\./.test(l),d=r.Function,p=function(e){return function(t,n){var o=i(arguments.length,1)>2,r=c(t)?t:d(t),l=o?u(arguments,2):void 0;return e(o?function(){a(r,this,l)}:r,n)}};o({global:!0,bind:!0,forced:s},{setTimeout:p(r.setTimeout),setInterval:p(r.setInterval)})}},e=>{e.O(0,[185,530,765,156,26],(()=>{return t=6915,e(e.s=t);var t}));e.O()}]);