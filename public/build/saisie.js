"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["saisie"],{

/***/ "./assets/js/saisie.js":
/*!*****************************!*\
  !*** ./assets/js/saisie.js ***!
  \*****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! core-js/modules/es.array.for-each.js */ "./node_modules/core-js/modules/es.array.for-each.js");
/* harmony import */ var core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_for_each_js__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! core-js/modules/es.object.to-string.js */ "./node_modules/core-js/modules/es.object.to-string.js");
/* harmony import */ var core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_object_to_string_js__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! core-js/modules/web.dom-collections.for-each.js */ "./node_modules/core-js/modules/web.dom-collections.for-each.js");
/* harmony import */ var core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_web_dom_collections_for_each_js__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! core-js/modules/es.parse-int.js */ "./node_modules/core-js/modules/es.parse-int.js");
/* harmony import */ var core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_parse_int_js__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! core-js/modules/es.number.to-fixed.js */ "./node_modules/core-js/modules/es.number.to-fixed.js");
/* harmony import */ var core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_number_to_fixed_js__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var core_js_modules_es_parse_float_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! core-js/modules/es.parse-float.js */ "./node_modules/core-js/modules/es.parse-float.js");
/* harmony import */ var core_js_modules_es_parse_float_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_parse_float_js__WEBPACK_IMPORTED_MODULE_5__);
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! core-js/modules/es.array.index-of.js */ "./node_modules/core-js/modules/es.array.index-of.js");
/* harmony import */ var core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_array_index_of_js__WEBPACK_IMPORTED_MODULE_6__);
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! core-js/modules/es.regexp.exec.js */ "./node_modules/core-js/modules/es.regexp.exec.js");
/* harmony import */ var core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_regexp_exec_js__WEBPACK_IMPORTED_MODULE_7__);
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! core-js/modules/es.string.split.js */ "./node_modules/core-js/modules/es.string.split.js");
/* harmony import */ var core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(core_js_modules_es_string_split_js__WEBPACK_IMPORTED_MODULE_8__);
/* harmony import */ var flatpickr__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! flatpickr */ "./node_modules/flatpickr/dist/esm/index.js");
/* harmony import */ var flatpickr_dist_l10n_fr__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! flatpickr/dist/l10n/fr */ "./node_modules/flatpickr/dist/l10n/fr.js");
/* harmony import */ var flatpickr_dist_l10n_fr__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(flatpickr_dist_l10n_fr__WEBPACK_IMPORTED_MODULE_10__);









// //FLATPICKR POUR LA SAISIE DATE


document.querySelector('.flatpickr').flatpickr({
  locale: 'fr',
  dateFormat: 'd/m/Y'
});
var pourcentage = document.querySelector('.pourcentage-input');
var heuredepart = document.querySelector('#form_heureDepart_hour');
var minutesdepart = document.querySelector('#form_heureDepart_minute');
var heurearrivee = document.querySelector('#form_heureArrivee_hour');
var minutesarrivee = document.querySelector('#form_heureArrivee_minute');
var dureeInput = document.querySelector('.dureeInput');
var chargeData = document.querySelector('#chargeInputId').dataset.charges;
var chargesInput = document.querySelector('.chargesInput');
var groupeSelect = document.querySelector('.groupeSelect');
var heureValoriseesInput = document.querySelector('.heureValoriseesInput');
var payer = document.querySelector('.apayerInput');
var btnSubmit = document.querySelector('.btn-basic'); //set default value to heuredepart to 00

dureeInput.value = 0;
var heureDepartBase = heuredepart.value = 0;
var minutesDepartBase = minutesdepart.value = 0;
var heureArriveeBase = heurearrivee.value = 0;
var minutesArriveeBase = minutesarrivee.value = 0;
[heuredepart, minutesdepart, heurearrivee, minutesarrivee, groupeSelect].forEach(function (evt) {
  evt.addEventListener('change', function () {
    heureDepartBase = heuredepart.value;
    minutesDepartBase = minutesdepart.value;
    heureArriveeBase = heurearrivee.value;
    minutesArriveeBase = minutesarrivee.value;
    heureArriveeBase = parseInt(heureArriveeBase);
    minutesArriveeBase = parseInt(minutesArriveeBase);
    heureDepartBase = parseInt(heureDepartBase);
    minutesDepartBase = parseInt(minutesDepartBase);
    var dureeHeure;

    if (heureDepartBase > heureArriveeBase) {
      dureeHeure = 24 - heureDepartBase + heureArriveeBase;
    } else {
      dureeHeure = heureArriveeBase - heureDepartBase;
    }

    var dureeMinute = minutesArriveeBase - minutesDepartBase;

    if (dureeMinute < 0) {
      dureeHeure = dureeHeure - 1;
      dureeMinute = 60 + dureeMinute;
    }

    if (dureeMinute < 10) {
      dureeMinute = '0' + dureeMinute;
    }

    dureeInput.value = dureeHeure + 'h' + dureeMinute;
    var dureeHeureValorisee = dureeHeure + '.' + dureeMinute; // parseFloat(dureeHeureValorisee); 

    heureValoriseesInput.value = (groupeSelect.value * chargeData * dureeHeureValorisee).toFixed(2);
  });
});
var selectData = groupeSelect.value;
pourcentage.value = selectData + ' €/h';
groupeSelect.addEventListener("change", function () {
  selectData = groupeSelect.value;
  pourcentage.value = selectData + " €/h";
}); // BAREME SAISIE  KILOMETRAGE 

var bareme = document.querySelector('.bareme');
var kmInput = document.querySelector('.kmInput');
var fraisInput = document.querySelector('.fraisInput');
var donsInput = document.querySelector('.donsInput');
var coutInput = document.querySelector('.coutInput');
var totalNote = document.querySelector('.totalNote');
bareme.value = 0.324;
kmInput.value = 0;
coutInput.value = 0;
fraisInput.value = 0;
donsInput.value = 0;
totalNote.value = 0;
payer.value = 0;
var baremeValue = bareme.value;
var kmValue = kmInput.value;
var coutValue = coutInput.value;
parseFloat(totalNote.value); // totalNote.value.toFixed(2);

var disableBtn = function disableBtn(bool) {
  console.log(isBtnDisabled());

  if (bool) {
    btnSubmit.disable = true;
  } else {
    btnSubmit.disable = false;
  }
};

var isBtnDisabled = function isBtnDisabled() {
  if (btnSubmit.disable == true) {
    return true;
  }

  if (btnSubmit.disable == false) {
    return false;
  }
};

[bareme, kmInput, coutInput, payer].forEach(function (evt) {
  evt.addEventListener('keyup', function () {
    coutValue = coutInput.value;
    baremeValue = bareme.value;
    kmValue = kmInput.value;
    fraisInput.value = (kmValue * baremeValue).toFixed(2); //avoid before the NaN output

    if (coutValue == '') {
      coutValue = 0;
    }

    if (isNaN(baremeValue)) {
      baremeValue = 0;
    } // localStorage.setItem('donsInput', donsInput.value);;


    totalNote.value = (parseFloat(fraisInput.value) + parseFloat(coutValue)).toFixed(2);

    if (parseFloat(payer.value) > totalNote.value) {
      disableBtn(true);
      payer.style = 'border: 1px solid red;';
    } else {
      disableBtn(false);
      payer.style = 'border: 1px solid green;';
    }

    donsInput.value = parseFloat(totalNote.value) - parseFloat(payer.value); // console.log(typeof donsInput.value);
    // prevent the NaN output

    if (isNaN(donsInput.value)) {
      donsInput.value = totalNote.value;
    } // !!DONINPUT TYPEOF === STRING DONC ON PEUT PAS TO FIXED DONC ON BIDOUILLE EN DESSOUS 


    if (donsInput.value.indexOf('.') != -1) {
      var donsInputValue = donsInput.value.split('.');

      if (donsInputValue[1].length > 2) {
        donsInput.value = parseFloat(donsInput.value).toFixed(2);
      }
    }
  });
});
var apayerInput = document.querySelector('.apayerInput'); // apayerInput.value = 0;

apayerInput.addEventListener('keyup keydown', function () {
  var apayerValue = apayerInput.value;
  var donsValue = donsInput.value;
  var totalNoteValue = totalNote.value; // console.log(typeof apayerValue);

  if (apayerValue == '') {
    apayerValue = 0; // localStorage.setItem('donsInput', donsValue);
  }

  console.log(apayerValue);

  if (parseFloat(apayerValue) > parseFloat(totalNoteValue)) {
    console.log('trop cher');
    apayerInput.style.border = '1px solid red';
  } // reduce the value of donsInput


  if (parseFloat(apayerValue) < parseFloat(totalNoteValue)) {
    console.log('ok');
    apayerInput.style.border = '1px solid green';
    donsValue = parseInt(donsValue) - parseInt(apayerValue); // localStorage.setItem('donsInput', donsInput.value);
  }
}); // const form_association = document.querySelector('#form_association');
// form_association.select2({
//     placeholder: 'Association',
//     maximumSelectionLength: 1,
//     allowClear: true,   
// });

var modal = document.querySelector('.modal-saisie');
var formSaisie = document.querySelector('.form-saisie');
var btnAccecpt = document.querySelector(".btn-oui");

var openModal = function openModal() {
  modal.dataset.active = true;
  formSaisie.style.opacity = "0.4";
};

var closeModal = function closeModal() {
  delete modal.dataset.active;
  formSaisie.style.opacity = "1";
};

var executed = false;
bareme.addEventListener('keydown', function () {
  if (executed == false) {
    openModal();
    executed = true;
  }
});
btnAccecpt.addEventListener("click", function () {
  closeModal();
});
btnSubmit.addEventListener('click', function () {
  if (isBtnDisabled()) {
    Toastify({
      text: "Vous ne pouvez pas vous faire rembourser une somme supérieur a votre total",
      duration: 3000,
      newWindow: true,
      close: true,
      gravity: "top",
      // `top` or `bottom`
      position: "right",
      // `left`, `center` or `right`
      stopOnFocus: true,
      // Prevents dismissing of toast on hover
      style: {
        // red as default
        background: "linear-gradient(315deg, #3f0d12 0%, #a71d31 74%)"
      },
      onClick: function onClick() {} // Callback after click

    }).showToast();
  }
});

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["vendors-node_modules_core-js_internals_export_js-node_modules_core-js_internals_is-constructor_js","vendors-node_modules_core-js_internals_advance-string-index_js-node_modules_core-js_internals-a3cf5d","vendors-node_modules_core-js_modules_es_parse-int_js-node_modules_core-js_modules_es_string_s-03957f","vendors-node_modules_core-js_modules_es_array_for-each_js-node_modules_core-js_modules_es_num-3218bb"], () => (__webpack_exec__("./assets/js/saisie.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUZULE9BUkY7QUFZTEMsTUFBQUEsT0FBTyxFQUFFLG1CQUFVLENBQUUsQ0FaaEIsQ0FZaUI7O0FBWmpCLEtBQUQsQ0FBUixDQWFHQyxTQWJIO0FBY0g7QUFDSixDQWpCRCIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL2Fzc2V0cy9qcy9zYWlzaWUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gLy9GTEFUUElDS1IgUE9VUiBMQSBTQUlTSUUgREFURVxuaW1wb3J0ICdmbGF0cGlja3InO1xuaW1wb3J0ICdmbGF0cGlja3IvZGlzdC9sMTBuL2ZyJztcblxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZsYXRwaWNrcicpLmZsYXRwaWNrcih7XG4gICAgbG9jYWxlOiAnZnInLFxuICAgIGRhdGVGb3JtYXQ6ICdkL20vWScsXG59KVxuXG5cblxuICAgIGNvbnN0IHBvdXJjZW50YWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvdXJjZW50YWdlLWlucHV0Jyk7XG4gICAgY29uc3QgaGV1cmVkZXBhcnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybV9oZXVyZURlcGFydF9ob3VyJyk7XG4gICAgY29uc3QgbWludXRlc2RlcGFydCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtX2hldXJlRGVwYXJ0X21pbnV0ZScpO1xuICAgIGNvbnN0IGhldXJlYXJyaXZlZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNmb3JtX2hldXJlQXJyaXZlZV9ob3VyJyk7XG4gICAgY29uc3QgbWludXRlc2Fycml2ZWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZm9ybV9oZXVyZUFycml2ZWVfbWludXRlJyk7XG4gICAgY29uc3QgZHVyZWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5kdXJlZUlucHV0Jyk7XG4gICAgbGV0IGNoYXJnZURhdGEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY2hhcmdlSW5wdXRJZCcpLmRhdGFzZXQuY2hhcmdlcztcbiAgICBjb25zdCBjaGFyZ2VzSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2hhcmdlc0lucHV0Jyk7XG4gICAgbGV0IGdyb3VwZVNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ncm91cGVTZWxlY3QnKTtcbiAgICBjb25zdCBoZXVyZVZhbG9yaXNlZXNJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZXVyZVZhbG9yaXNlZXNJbnB1dCcpO1xuICAgIGNvbnN0IHBheWVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwYXllcklucHV0Jyk7XG4gICAgY29uc3QgYnRuU3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmJ0bi1iYXNpYycpO1xuXG4gICAgLy9zZXQgZGVmYXVsdCB2YWx1ZSB0byBoZXVyZWRlcGFydCB0byAwMFxuXG4gICAgZHVyZWVJbnB1dC52YWx1ZSA9IDA7XG4gICAgbGV0IGhldXJlRGVwYXJ0QmFzZSA9ICBoZXVyZWRlcGFydC52YWx1ZSA9IDA7XG4gICAgbGV0IG1pbnV0ZXNEZXBhcnRCYXNlID0gbWludXRlc2RlcGFydC52YWx1ZSA9IDA7XG4gICAgbGV0IGhldXJlQXJyaXZlZUJhc2UgPSBoZXVyZWFycml2ZWUudmFsdWUgPSAwO1xuICAgIGxldCBtaW51dGVzQXJyaXZlZUJhc2UgPSBtaW51dGVzYXJyaXZlZS52YWx1ZSA9IDA7XG5cblxuICAgIFtoZXVyZWRlcGFydCwgbWludXRlc2RlcGFydCwgaGV1cmVhcnJpdmVlLCBtaW51dGVzYXJyaXZlZSwgZ3JvdXBlU2VsZWN0XS5mb3JFYWNoKGV2dCA9PiB7XG4gICAgICAgIGV2dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCAoKSA9PiB7XG5cbiAgICAgICAgICAgIGhldXJlRGVwYXJ0QmFzZSA9IGhldXJlZGVwYXJ0LnZhbHVlO1xuICAgICAgICAgICAgbWludXRlc0RlcGFydEJhc2UgPSBtaW51dGVzZGVwYXJ0LnZhbHVlO1xuICAgICAgICAgICAgaGV1cmVBcnJpdmVlQmFzZSA9IGhldXJlYXJyaXZlZS52YWx1ZTtcbiAgICAgICAgICAgIG1pbnV0ZXNBcnJpdmVlQmFzZSA9IG1pbnV0ZXNhcnJpdmVlLnZhbHVlO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBoZXVyZUFycml2ZWVCYXNlID0gcGFyc2VJbnQoaGV1cmVBcnJpdmVlQmFzZSk7XG4gICAgICAgICAgICBtaW51dGVzQXJyaXZlZUJhc2UgPSBwYXJzZUludChtaW51dGVzQXJyaXZlZUJhc2UpO1xuXG4gICAgICAgICAgICBoZXVyZURlcGFydEJhc2UgPSBwYXJzZUludChoZXVyZURlcGFydEJhc2UpO1xuICAgICAgICAgICAgbWludXRlc0RlcGFydEJhc2UgPSBwYXJzZUludChtaW51dGVzRGVwYXJ0QmFzZSk7XG5cbiAgICAgICAgICAgIGxldCBkdXJlZUhldXJlXG4gICAgICAgICAgICBpZihoZXVyZURlcGFydEJhc2UgPiBoZXVyZUFycml2ZWVCYXNlKXtcbiAgICAgICAgICAgICAgICBkdXJlZUhldXJlID0gMjQgLSBoZXVyZURlcGFydEJhc2UgKyBoZXVyZUFycml2ZWVCYXNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICBkdXJlZUhldXJlID0gaGV1cmVBcnJpdmVlQmFzZSAtIGhldXJlRGVwYXJ0QmFzZTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICBsZXQgZHVyZWVNaW51dGUgPSBtaW51dGVzQXJyaXZlZUJhc2UgLSBtaW51dGVzRGVwYXJ0QmFzZTtcbiAgICAgICAgICAgIGlmKGR1cmVlTWludXRlIDwgMCl7XG4gICAgICAgICAgICAgICAgZHVyZWVIZXVyZSA9IGR1cmVlSGV1cmUgLSAxO1xuICAgICAgICAgICAgICAgIGR1cmVlTWludXRlID0gNjAgKyBkdXJlZU1pbnV0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKGR1cmVlTWludXRlIDwgMTApe1xuICAgICAgICAgICAgICAgIGR1cmVlTWludXRlID0gJzAnICsgZHVyZWVNaW51dGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGR1cmVlSW5wdXQudmFsdWUgPSBkdXJlZUhldXJlICsgJ2gnICsgZHVyZWVNaW51dGU7XG5cbiAgICAgICAgICAgIGxldCBkdXJlZUhldXJlVmFsb3Jpc2VlID0gZHVyZWVIZXVyZSArICcuJyArIGR1cmVlTWludXRlO1xuICAgICAgICAgICAgLy8gcGFyc2VGbG9hdChkdXJlZUhldXJlVmFsb3Jpc2VlKTsgXG5cbiAgICAgICAgICAgIGhldXJlVmFsb3Jpc2Vlc0lucHV0LnZhbHVlID0gKGdyb3VwZVNlbGVjdC52YWx1ZSAqIGNoYXJnZURhdGEgKiBkdXJlZUhldXJlVmFsb3Jpc2VlKS50b0ZpeGVkKDIpO1xuICAgIH0pO1xufSk7XG5cbmxldCBzZWxlY3REYXRhID0gZ3JvdXBlU2VsZWN0LnZhbHVlO1xuXG5wb3VyY2VudGFnZS52YWx1ZSA9IHNlbGVjdERhdGEgKyAnIOKCrC9oJztcblxuZ3JvdXBlU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xuICAgIHNlbGVjdERhdGEgPSBncm91cGVTZWxlY3QudmFsdWVcbiAgICBwb3VyY2VudGFnZS52YWx1ZSA9IHNlbGVjdERhdGEgKyBcIiDigqwvaFwiXG59KTtcblxuXG5cbiAgICAvLyBCQVJFTUUgU0FJU0lFICBLSUxPTUVUUkFHRSBcbiAgICBjb25zdCBiYXJlbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuYmFyZW1lJyk7XG4gICAgY29uc3Qga21JbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5rbUlucHV0Jyk7XG4gICAgY29uc3QgZnJhaXNJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5mcmFpc0lucHV0Jyk7XG4gICAgY29uc3QgZG9uc0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmRvbnNJbnB1dCcpO1xuICAgIGNvbnN0IGNvdXRJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jb3V0SW5wdXQnKTtcbiAgICBjb25zdCB0b3RhbE5vdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudG90YWxOb3RlJyk7XG5cblxuICAgIGJhcmVtZS52YWx1ZSA9IDAuMzI0O1xuICAgIGttSW5wdXQudmFsdWUgPSAwO1xuICAgIGNvdXRJbnB1dC52YWx1ZSA9IDA7XG4gICAgZnJhaXNJbnB1dC52YWx1ZSA9IDA7XG4gICAgZG9uc0lucHV0LnZhbHVlID0gMDtcbiAgICB0b3RhbE5vdGUudmFsdWUgPSAwO1xuICAgIHBheWVyLnZhbHVlID0gMDtcblxuICAgIGxldCBiYXJlbWVWYWx1ZSA9IGJhcmVtZS52YWx1ZTtcbiAgICBsZXQga21WYWx1ZSA9IGttSW5wdXQudmFsdWU7XG4gICAgbGV0IGNvdXRWYWx1ZSA9IGNvdXRJbnB1dC52YWx1ZTtcblxuXG4gICAgcGFyc2VGbG9hdCh0b3RhbE5vdGUudmFsdWUpO1xuICAgIC8vIHRvdGFsTm90ZS52YWx1ZS50b0ZpeGVkKDIpO1xuXG5cbiAgICBcbiAgICBjb25zdCBkaXNhYmxlQnRuID0gKGJvb2wpID0+IHtcbiAgICAgICAgY29uc29sZS5sb2coaXNCdG5EaXNhYmxlZCgpKVxuICAgICAgICBpZihib29sKXtcbiAgICAgICAgICAgIGJ0blN1Ym1pdC5kaXNhYmxlID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBlbHNle1xuICAgICAgICAgICAgYnRuU3VibWl0LmRpc2FibGUgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGNvbnN0IGlzQnRuRGlzYWJsZWQgPSAoKSA9PiB7XG4gICAgICAgIGlmKGJ0blN1Ym1pdC5kaXNhYmxlID09IHRydWUpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgICAgfVxuICAgICAgICBpZihidG5TdWJtaXQuZGlzYWJsZSA9PSBmYWxzZSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgIH1cbiAgXG4gICAgW2JhcmVtZSwga21JbnB1dCwgY291dElucHV0LCBwYXllcl0uZm9yRWFjaChldnQgPT4ge1xuICAgICAgICBldnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCAoKSA9PiB7XG4gICAgICAgICAgICBjb3V0VmFsdWUgPSBjb3V0SW5wdXQudmFsdWU7XG4gICAgICAgICAgICBiYXJlbWVWYWx1ZSA9IGJhcmVtZS52YWx1ZTtcbiAgICAgICAgICAgIGttVmFsdWUgPSBrbUlucHV0LnZhbHVlO1xuXG4gICAgICAgICAgICBmcmFpc0lucHV0LnZhbHVlID0gKGttVmFsdWUgKiBiYXJlbWVWYWx1ZSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIC8vYXZvaWQgYmVmb3JlIHRoZSBOYU4gb3V0cHV0XG4gICAgICAgICAgICBpZihjb3V0VmFsdWUgPT0gJycpe1xuICAgICAgICAgICAgICAgIGNvdXRWYWx1ZSA9IDA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGlzTmFOKGJhcmVtZVZhbHVlKSl7XG4gICAgICAgICAgICAgICAgYmFyZW1lVmFsdWUgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ2RvbnNJbnB1dCcsIGRvbnNJbnB1dC52YWx1ZSk7O1xuICAgICAgICAgICAgdG90YWxOb3RlLnZhbHVlID0gKHBhcnNlRmxvYXQoZnJhaXNJbnB1dC52YWx1ZSkgKyBwYXJzZUZsb2F0KGNvdXRWYWx1ZSkpLnRvRml4ZWQoMilcblxuICAgICAgICAgICAgaWYocGFyc2VGbG9hdChwYXllci52YWx1ZSkgPiB0b3RhbE5vdGUudmFsdWUpe1xuICAgICAgICAgICAgICAgIGRpc2FibGVCdG4odHJ1ZSk7XG4gICAgICAgICAgICAgICAgcGF5ZXIuc3R5bGUgPSAnYm9yZGVyOiAxcHggc29saWQgcmVkOyc7XG5cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGRpc2FibGVCdG4oZmFsc2UpO1xuICAgICAgICAgICAgICAgIHBheWVyLnN0eWxlID0gJ2JvcmRlcjogMXB4IHNvbGlkIGdyZWVuOyc7XG4gICAgICAgICAgICB9XG5cblxuXG5cbiAgICAgICAgIGRvbnNJbnB1dC52YWx1ZSA9IHBhcnNlRmxvYXQodG90YWxOb3RlLnZhbHVlKSAtIHBhcnNlRmxvYXQocGF5ZXIudmFsdWUpOyAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0eXBlb2YgZG9uc0lucHV0LnZhbHVlKTtcbiAgICAgICAgLy8gcHJldmVudCB0aGUgTmFOIG91dHB1dFxuICAgICAgICBpZihpc05hTihkb25zSW5wdXQudmFsdWUpKXtcbiAgICAgICAgICAgIGRvbnNJbnB1dC52YWx1ZSA9IHRvdGFsTm90ZS52YWx1ZTtcbiAgICAgICAgfSAgICAgICBcbiAgICAgICAgLy8gISFET05JTlBVVCBUWVBFT0YgPT09IFNUUklORyBET05DIE9OIFBFVVQgUEFTIFRPIEZJWEVEIERPTkMgT04gQklET1VJTExFIEVOIERFU1NPVVMgXG4gICAgICAgIGlmKGRvbnNJbnB1dC52YWx1ZS5pbmRleE9mKCcuJykgIT0gLTEpe1xuICAgICAgICAgICAgbGV0IGRvbnNJbnB1dFZhbHVlID0gZG9uc0lucHV0LnZhbHVlLnNwbGl0KCcuJyk7XG4gICAgICAgICAgICBpZihkb25zSW5wdXRWYWx1ZVsxXS5sZW5ndGggPiAyKXtcbiAgICAgICAgICAgICAgICBkb25zSW5wdXQudmFsdWUgPSBwYXJzZUZsb2F0KGRvbnNJbnB1dC52YWx1ZSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuICAgIH0pO1xuXG5cblxuICAgIGNvbnN0IGFwYXllcklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFwYXllcklucHV0Jyk7XG4gICAgXG4gICAgLy8gYXBheWVySW5wdXQudmFsdWUgPSAwO1xuXG4gICAgYXBheWVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAga2V5ZG93bicsICgpID0+IHtcbiAgICAgICAgbGV0IGFwYXllclZhbHVlID0gYXBheWVySW5wdXQudmFsdWU7XG4gICAgICAgIGxldCBkb25zVmFsdWUgPSBkb25zSW5wdXQudmFsdWU7XG4gICAgICAgIGxldCB0b3RhbE5vdGVWYWx1ZSA9IHRvdGFsTm90ZS52YWx1ZTtcblxuICAgICAgICBcblxuICAgICAgICAvLyBjb25zb2xlLmxvZyh0eXBlb2YgYXBheWVyVmFsdWUpO1xuXG4gICAgICAgIGlmKGFwYXllclZhbHVlID09ICcnKXtcbiAgICAgICAgICAgIGFwYXllclZhbHVlID0gMDtcbiAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkb25zSW5wdXQnLCBkb25zVmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKGFwYXllclZhbHVlKTtcbiAgICAgICAgaWYgKHBhcnNlRmxvYXQoYXBheWVyVmFsdWUpID4gcGFyc2VGbG9hdCh0b3RhbE5vdGVWYWx1ZSkpe1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Ryb3AgY2hlcicpO1xuICAgICAgICAgICAgYXBheWVySW5wdXQuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCByZWQnO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gcmVkdWNlIHRoZSB2YWx1ZSBvZiBkb25zSW5wdXRcbiAgICAgICAgaWYocGFyc2VGbG9hdChhcGF5ZXJWYWx1ZSkgPCBwYXJzZUZsb2F0KHRvdGFsTm90ZVZhbHVlKSl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnb2snKTtcbiAgICAgICAgICAgIGFwYXllcklucHV0LnN0eWxlLmJvcmRlciA9ICcxcHggc29saWQgZ3JlZW4nO1xuICAgICAgICAgICAgZG9uc1ZhbHVlID0gcGFyc2VJbnQoZG9uc1ZhbHVlKSAtIHBhcnNlSW50KGFwYXllclZhbHVlKTtcbiAgICAgICAgICAgIC8vIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdkb25zSW5wdXQnLCBkb25zSW5wdXQudmFsdWUpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICAvLyBjb25zdCBmb3JtX2Fzc29jaWF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2Zvcm1fYXNzb2NpYXRpb24nKTtcbiAgICAvLyBmb3JtX2Fzc29jaWF0aW9uLnNlbGVjdDIoe1xuICAgIC8vICAgICBwbGFjZWhvbGRlcjogJ0Fzc29jaWF0aW9uJyxcbiAgICAvLyAgICAgbWF4aW11bVNlbGVjdGlvbkxlbmd0aDogMSxcbiAgICAvLyAgICAgYWxsb3dDbGVhcjogdHJ1ZSwgICBcbiAgICAvLyB9KTtcblxuICAgIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLXNhaXNpZScpO1xuICAgIGNvbnN0IGZvcm1TYWlzaWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZm9ybS1zYWlzaWUnKTtcbiAgICBjb25zdCBidG5BY2NlY3B0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG4tb3VpXCIpO1xuXG5cbiAgICBjb25zdCBvcGVuTW9kYWwgPSAoKSA9PiB7XG4gICAgICAgIG1vZGFsLmRhdGFzZXQuYWN0aXZlID0gdHJ1ZTsgXG4gICAgICAgIGZvcm1TYWlzaWUuc3R5bGUub3BhY2l0eSA9IFwiMC40XCJcbiAgICB9XG5cbiAgICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xuICAgICAgICBkZWxldGUgbW9kYWwuZGF0YXNldC5hY3RpdmVcbiAgICAgICAgZm9ybVNhaXNpZS5zdHlsZS5vcGFjaXR5ID0gXCIxXCI7XG4gICAgfVxuXG4gICAgbGV0IGV4ZWN1dGVkID0gZmFsc2VcbiAgICBiYXJlbWUuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsICgpID0+IHtcbiAgICAgICAgaWYoZXhlY3V0ZWQgPT0gZmFsc2Upe1xuICAgICAgICAgICAgb3Blbk1vZGFsKCk7XG4gICAgICAgICAgICBleGVjdXRlZCA9IHRydWU7XG4gICAgICAgIH1cbiAgICB9KVxuXG4gICAgYnRuQWNjZWNwdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgICBjbG9zZU1vZGFsKCk7XG4gICAgfSlcblxuXG4gICAgYnRuU3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBpZihpc0J0bkRpc2FibGVkKCkpe1xuICAgICAgICAgICAgVG9hc3RpZnkoe1xuICAgICAgICAgICAgICAgIHRleHQ6IFwiVm91cyBuZSBwb3V2ZXogcGFzIHZvdXMgZmFpcmUgcmVtYm91cnNlciB1bmUgc29tbWUgc3Vww6lyaWV1ciBhIHZvdHJlIHRvdGFsXCIsXG4gICAgICAgICAgICAgICAgZHVyYXRpb246IDMwMDAsXG4gICAgICAgICAgICAgICAgbmV3V2luZG93OiB0cnVlLFxuICAgICAgICAgICAgICAgIGNsb3NlOiB0cnVlLFxuICAgICAgICAgICAgICAgIGdyYXZpdHk6IFwidG9wXCIsIC8vIGB0b3BgIG9yIGBib3R0b21gXG4gICAgICAgICAgICAgICAgcG9zaXRpb246IFwicmlnaHRcIiwgLy8gYGxlZnRgLCBgY2VudGVyYCBvciBgcmlnaHRgXG4gICAgICAgICAgICAgICAgc3RvcE9uRm9jdXM6IHRydWUsIC8vIFByZXZlbnRzIGRpc21pc3Npbmcgb2YgdG9hc3Qgb24gaG92ZXJcbiAgICAgICAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgICAgICAgICAgLy8gcmVkIGFzIGRlZmF1bHRcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogXCJsaW5lYXItZ3JhZGllbnQoMzE1ZGVnLCAjM2YwZDEyIDAlLCAjYTcxZDMxIDc0JSlcIixcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIG9uQ2xpY2s6IGZ1bmN0aW9uKCl7fSAvLyBDYWxsYmFjayBhZnRlciBjbGlja1xuICAgICAgICAgICAgfSkuc2hvd1RvYXN0KCk7XG4gICAgICAgIH1cbiAgICB9KVxuXG5cbiJdLCJuYW1lcyI6WyJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJmbGF0cGlja3IiLCJsb2NhbGUiLCJkYXRlRm9ybWF0IiwicG91cmNlbnRhZ2UiLCJoZXVyZWRlcGFydCIsIm1pbnV0ZXNkZXBhcnQiLCJoZXVyZWFycml2ZWUiLCJtaW51dGVzYXJyaXZlZSIsImR1cmVlSW5wdXQiLCJjaGFyZ2VEYXRhIiwiZGF0YXNldCIsImNoYXJnZXMiLCJjaGFyZ2VzSW5wdXQiLCJncm91cGVTZWxlY3QiLCJoZXVyZVZhbG9yaXNlZXNJbnB1dCIsInBheWVyIiwiYnRuU3VibWl0IiwidmFsdWUiLCJoZXVyZURlcGFydEJhc2UiLCJtaW51dGVzRGVwYXJ0QmFzZSIsImhldXJlQXJyaXZlZUJhc2UiLCJtaW51dGVzQXJyaXZlZUJhc2UiLCJmb3JFYWNoIiwiZXZ0IiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhcnNlSW50IiwiZHVyZWVIZXVyZSIsImR1cmVlTWludXRlIiwiZHVyZWVIZXVyZVZhbG9yaXNlZSIsInRvRml4ZWQiLCJzZWxlY3REYXRhIiwiYmFyZW1lIiwia21JbnB1dCIsImZyYWlzSW5wdXQiLCJkb25zSW5wdXQiLCJjb3V0SW5wdXQiLCJ0b3RhbE5vdGUiLCJiYXJlbWVWYWx1ZSIsImttVmFsdWUiLCJjb3V0VmFsdWUiLCJwYXJzZUZsb2F0IiwiZGlzYWJsZUJ0biIsImJvb2wiLCJjb25zb2xlIiwibG9nIiwiaXNCdG5EaXNhYmxlZCIsImRpc2FibGUiLCJpc05hTiIsInN0eWxlIiwiaW5kZXhPZiIsImRvbnNJbnB1dFZhbHVlIiwic3BsaXQiLCJsZW5ndGgiLCJhcGF5ZXJJbnB1dCIsImFwYXllclZhbHVlIiwiZG9uc1ZhbHVlIiwidG90YWxOb3RlVmFsdWUiLCJib3JkZXIiLCJtb2RhbCIsImZvcm1TYWlzaWUiLCJidG5BY2NlY3B0Iiwib3Blbk1vZGFsIiwiYWN0aXZlIiwib3BhY2l0eSIsImNsb3NlTW9kYWwiLCJleGVjdXRlZCIsIlRvYXN0aWZ5IiwidGV4dCIsImR1cmF0aW9uIiwibmV3V2luZG93IiwiY2xvc2UiLCJncmF2aXR5IiwicG9zaXRpb24iLCJzdG9wT25Gb2N1cyIsImJhY2tncm91bmQiLCJvbkNsaWNrIiwic2hvd1RvYXN0Il0sInNvdXJjZVJvb3QiOiIifQ==